<!-- <!doctype html>
<html lang="en"> -->
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">

    <title>RATING KEPUASAN</title>
    
<script type="module">
  window.pull = async () => {
    const data = await fetch(
      `/api/db`,
      {method : 'get'}
    ).then(e=>e.json())
    return data;
  };
  window.push = async (c) => {
    const elNama = document.querySelector('.nama');
    const elKomentar = document.querySelector('.komentar');
    const o = document.querySelector('.noinp');
    
    if (elNama.value == '' && elKomentar.value == ''){
      o.style.color = 'red';
      o.innerHTML = `Tolong masukan nama dan kesan`
      return;
    }
    
		const data = {
			nama : document.querySelector('.nama').value,
			rating : c,
			komentar : document.querySelector('.komentar').value
		}
		console.log(data)
    
    o.style.color = 'lime'
    o.innerHTML = `Terima Kasih atas masukan anda`
    elNama.value = ''
    elKomentar.value = ''
    
    
		await fetch(
			`/api/db`,
			{
				method : 'post',
				headers : {  "Content-Type" : "application/json" },
				body : JSON.stringify(data)
			}
		)
    
    const elems = document.querySelectorAll('#data-mati')
    
    const num = await window.pull();
    
    Object.entries(num).forEach((s) => {
      console.log(s)
      if (s[0] == 'senang')
        elems[0].innerHTML = s[1];
      else if (s[0] == 'biasa')
        elems[1].innerHTML = s[1];
      else if (s[0] == 'kurang')
        elems[2].innerHTML = s[1];
    })
	};
</script>
  </head>
  <!-- <body> -->
	  <div class="jumbotron jumbotron-fluid bg-info text-white">
		  <div class="container text-center">
		    <h1 class="display-4">RATING KEPUASAN</h1>
		    <p class="lead">
		    	<h2>
		    		RATING KEPUASAN
		    		<br> MEMBERI RATING AGAR KAMI DAPAT MENG-IMPROVE SKILL KAMI DALAM MELAYANI ANDA
		    	</h2>
		    </p>
		  </div>
	  </div>

	 <style type="text/css">
		.box{
			padding: 30px 40px;
			border-radius: 5px;
		}
	 </style>
  <!--Awal Container-->
  <div class="container text-center">
    <div class="alert alert-warning" role="alert">
       Silahkan Ketik Kritik dan Saran tentang pelayanan kami !!! 
    </div>
    <form>
        <div class="form-group">
          <label for="exampleFormControlInput1">NAMA</label>
          <input type="name" class="form-control nama" id="exampleFormControlInput1" placeholder="Cth : Ricky/Aria/Ivan">
        </div>
        <div class="form-group">
          <label for="exampleFormControlTextarea1">Kritik dan Saran</label>
          <textarea class="form-control komentar" id="exampleFormControlTextarea1" rows="3" placeholder="Silahkan ketik saran dan kritik di kolom ini"></textarea>
        </div>
      </form>
    <div class="container text-center">
        <div class="alert alert-warning" role="alert">
           Perhatian!! untuk memberikan penilaian silahkan klik tombol PILIH dibawah
        </div>

            <div class="row text-center">
                <div class="col-md-4">
                    <div class="bg-secondary box text-white">
                        <div class="row">
                            <div class="col-md-6">
                                <h5>SENANG</h5>
                                <h2 id="data-mati"> {{senang}} </h2>
                                <h5>suara </h5>
                            </div>
                                <div class="col-md-4">
                                        <img src="/tugas/puas.png" style="width: 100px;">
                                </div>
                              <div class="col-md-6">
                                <a onclick="push(1)" href="#" title="Jika Anda Merasa Senang dengan Pelayanan kami, Klik tombol ini!">
                                <button type="button" class="btn btn-outline-primary btn-block text-white">PILIH</button>  
                                </a>
                              </div>
                        </div>
                    </div>
                </div>  
                <div class="col-md-4">
                    <div class="bg-secondary box text-white">
                        <div class="row">
                            <div class="col-md-6">
                                <h5>BIASA</h5>
                                <h2 id="data-mati"> {{biasa}} </h2>
                                <h5>suara </h5>
                            </div>
                            <div class="col-md-4">
                                    <img src="/tugas/cukup.png" style="width: 100px;">
                            </div>
                            <div class="col-md-6">
                                <a onclick="push(2)" href="#" title="Jika Anda Merasa BIASA dengan Pelayanan kami, Klik tombol ini!">
                                <button type="button" class="btn btn-outline-primary btn-block text-white">PILIH</button>  
                                </a>
                            </div>
                        </div>
                    </div>
                </div>
   
                <div class="col-md-4">
                    <div class="bg-secondary box text-white">
                        <div class="row">
                            <div class="col-md-6">
                                <h5>KURANG</h5>
                                <h2 id="data-mati"> {{kurang}} </h2>
                                <h5>suara </h5>
                            </div>
                            <div class="col-md-4">
                                    <img src="/tugas/kurang.png" style="width: 100px;">
                            </div>
                            <div class="col-md-6">
                                <a onclick="push(3)" href="#" title="Jika Anda Merasa KURANG dengan Pelayanan kami, Klik tombol ini!">
                                <button type="button" class="btn btn-outline-primary btn-block text-white">PILIH</button> 
                                </a>
                            </div>
                        </div>
                    </div>
                </div>
   
            </div>
            <div class="noinp"></div>
  <!--Akhir Container-->
<div style="height: 10rem;margin: 1rem;"></div>
  <!-- </body>
</html> -->